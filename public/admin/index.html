<!DOCTYPE html>
<html lang="zh-HK">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Admin - OHYA2.0</title>
  <style>
    body { font-family: -apple-system, sans-serif; margin: 0; padding: 0; background: #f5f5f5; }
    .nav { background: #1a1a2e; padding: 10px; display: flex; flex-wrap: wrap; gap: 5px; }
    .nav a { color: #fff; text-decoration: none; padding: 8px 12px; background: #333; border-radius: 5px; font-size: 12px; }
    .nav a.active { background: #ec4899; }
    .main { padding: 10px; }
    h1 { font-size: 16px; margin: 10px 0; }
    .card { background: #fff; padding: 12px; border-radius: 8px; margin-bottom: 10px; font-size: 13px; }
    table { width: 100%; border-collapse: collapse; font-size: 12px; }
    th, td { padding: 8px; border-bottom: 1px solid #eee; text-align: left; }
    .btn { padding: 6px 10px; background: #6366f1; color: #fff; border: none; border-radius: 4px; font-size: 11px; }
  </style>
</head>
<body>
  <div class="nav">
    <a href="#" onclick="nav('dashboard')" class="active" id="nav-dashboard">ðŸ“Š Dashboard</a>
    <a href="#" onclick="nav('orders')" id="nav-orders">ðŸ›’ Orders</a>
    <a href="#" onclick="nav('products')" id="nav-products">ðŸ“¦ Products</a>
    <a href="#" onclick="nav('customers')" id="nav-customers">ðŸ‘¥ Customers</a>
  </div>
  <div class="main">
    <h1 id="title">Dashboard</h1>
    <div id="content"></div>
  </div>
  <script>
    function nav(page) {
      document.querySelectorAll('.nav a').forEach(function(a){a.classList.remove('active');});
      document.getElementById('nav-'+page).classList.add('active');
      document.getElementById('title').innerText = page;
      
      if(page==='dashboard') loadDashboard();
      else if(page==='orders') loadOrders();
      else if(page==='products') loadProducts();
      else if(page==='customers') loadCustomers();
    }
    
    function loadDashboard() {
      fetch('/api/analytics').then(function(r){return r.json();}).then(function(d){
        document.getElementById('content').innerHTML = 
          '<div class="card">ðŸ“¦ Products: '+d.totalProducts+'</div>' +
          '<div class="card">ðŸ›’ Orders: '+d.totalOrders+'</div>' +
          '<div class="card">ðŸ‘¥ Customers: '+d.totalCustomers+'</div>' +
          '<div class="card">ðŸ’° Revenue: $'+(d.totalRevenue||0)+'</div>';
      });
    }
    
    function loadOrders() {
      fetch('/api/orders').then(function(r){return r.json();}).then(function(d){
        var html = '<table><tr><th>ID</th><th>Customer</th><th>Total</th><th>Status</th></tr>';
        html += d.slice(0,10).map(function(o){return '<tr><td>#'+o.id+'</td><td>'+(o.customer_name||'Guest')+'</td><td>$'+(o.total||0)+'</td><td>'+(o.status||'pending')+'</td></tr>';}).join('');
        html += '</table>';
        document.getElementById('content').innerHTML = html;
      });
    }
    
    function loadProducts() {
      fetch('/api/products').then(function(r){return r.json();}).then(function(d){
        var html = '<table><tr><th>Code</th><th>Name</th><th>Price</th><th>Stock</th></tr>';
        html += d.slice(0,10).map(function(p){return '<tr><td>'+(p.product_code||'')+'</td><td>'+(p.name||'').substring(0,15)+'</td><td>$'+(p.price||0)+'</td><td>'+(p.stock||0)+'</td></tr>';}).join('');
        html += '</table>';
        document.getElementById('content').innerHTML = html;
      });
    }
    
    function loadCustomers() {
      fetch('/api/customers').then(function(r){return r.json();}).then(function(d){
        var html = '<table><tr><th>Name</th><th>Email</th><th>Total</th></tr>';
        html += d.slice(0,10).map(function(c){return '<tr><td>'+(c.name||'-')+'</td><td>'+(c.email||'-')+'</td><td>$'+(c.total||0)+'</td></tr>';}).join('');
        html += '</table>';
        document.getElementById('content').innerHTML = html;
      });
    }
    
    // Load dashboard on start
    loadDashboard();
  </script>
</body>
</html>
